import{_ as te}from"./VButton.vue_vue_type_script_setup_true_lang-CcdPFSk3.js";import{_ as ne}from"./LocalSendAnnouncement.vue_vue_type_script_setup_true_lang-BazO1kNx.js";import{o as p,c as f,b as h,d as I,u as D,k as z,q as C,a as y,e as d,t as _,n as E,F as T,f as A,h as V,s as Z,x as oe,y as re,z as se,A as H,B as J,C as ae,D as le,l as ie,E as ce,w as W,G as j,i as ue,r as L,I as N}from"./app-u_f2ncIN.js";import{_ as de}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-BgR3BxLU.js";function pe(t,e){return p(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})])}function K(t,e){return p(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"})])}function Q(t,e){return p(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})])}function fe(t,e){return p(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function me(t,e){return p(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function R(t,e){return p(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const ve={class:"relative overflow-hidden rounded-lg border border-neutral-300 text-lg"},he={class:"flex w-full items-center gap-2"},ge=["src"],ye={key:1,class:"flex aspect-square h-20 items-center justify-center bg-neutral-50 text-neutral-500"},we={class:"overflow-hidden p-4"},xe={class:"overflow-hidden text-ellipsis whitespace-nowrap"},_e={class:"overflow-hidden text-ellipsis whitespace-nowrap text-sm text-neutral-500"},be={class:"flex"},ke=["href"],Ce=I({__name:"Media",props:{media:{}},setup(t){const e=t,{t:n}=D(),s=z(()=>e.media.mimetype.startsWith("image/")),a=C(!1),o=async()=>{try{const r=await(await fetch(e.media.url)).blob();await navigator.clipboard.write([new ClipboardItem({[r.type]:r})]),a.value=!0,setTimeout(()=>a.value=!1,3e3)}catch(c){console.error(c.name,c.message)}};return(c,r)=>(p(),f("article",ve,[h("div",he,[s.value?(p(),f("img",{key:0,src:c.media.url,alt:"",class:"h-20"},null,8,ge)):(p(),f("div",ye,[y(d(fe),{class:"size-8"})])),h("div",we,[h("h2",xe,_(c.media.filename),1),h("p",_e,_(c.media.humanReadableSize)+" - "+_(c.media.mimetype),1)])]),h("div",be,[s.value?(p(),f("button",{key:0,type:"button",onClick:r[0]||(r[0]=()=>o()),class:E(["flex flex-1 items-center justify-center gap-1 px-4 py-2",a.value?"bg-green-50 text-green-700":"bg-neutral-50 text-neutral-800 hover:bg-neutral-100"])},[a.value?(p(),f(T,{key:0},[A(_(d(n)("copied"))+" ",1),y(d(K),{class:"size-5"})],64)):(p(),f(T,{key:1},[A(_(d(n)("copy"))+" ",1),y(d(Q),{class:"size-5"})],64))],2)):V("",!0),h("a",{href:c.media.url,target:"_blank",rel:"noreferrer noopener",class:"flex flex-1 items-center justify-center gap-1 bg-neutral-50 px-4 py-2 text-neutral-800 hover:bg-neutral-100"},[A(_(d(n)("download"))+" ",1),y(d(pe),{class:"size-6"})],8,ke)])]))}});function O(t){return oe()?(re(t),!0):!1}function q(){const t=new Set,e=a=>{t.delete(a)};return{on:a=>{t.add(a);const o=()=>e(a);return O(o),{off:o}},off:e,trigger:(...a)=>Promise.all(Array.from(t).map(o=>o(...a)))}}function $(t){return typeof t=="function"?t():d(t)}const B=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Se=Object.prototype.toString,Te=t=>Se.call(t)==="[object Object]",P=()=>{},Me=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);function Ae(t,e){function n(...s){return new Promise((a,o)=>{Promise.resolve(t(()=>e.apply(this,s),{fn:e,thisArg:this,args:s})).then(a).catch(o)})}return n}function $e(t,e={}){let n,s,a=P;const o=r=>{clearTimeout(r),a(),a=P};return r=>{const m=$(t),v=$(e.maxWait);return n&&o(n),m<=0||v!==void 0&&v<=0?(s&&(o(s),s=null),Promise.resolve(r())):new Promise((u,l)=>{a=e.rejectOnCancel?l:u,v&&!s&&(s=setTimeout(()=>{n&&o(n),s=null,u(r())},v)),n=setTimeout(()=>{s&&o(s),s=null,u(r())},m)})}}function je(t){let e;function n(){return e||(e=t()),e}return n.reset=async()=>{const s=e;e=void 0,s&&await s},n}function ze(t,e=200,n={}){return Ae($e(e,n),t)}function Ve(t,e,n={}){const{immediate:s=!0}=n,a=C(!1);let o=null;function c(){o&&(clearTimeout(o),o=null)}function r(){a.value=!1,c()}function m(...v){c(),a.value=!0,o=setTimeout(()=>{a.value=!1,o=null,t(...v)},$(e))}return s&&(a.value=!0,B&&m()),O(r),{isPending:Z(a),start:m,stop:r}}const Be=B?window:void 0,Pe=B?window.document:void 0,X=B?window.navigator:void 0;function Ie(t){var e;const n=$(t);return(e=n==null?void 0:n.$el)!=null?e:n}function Y(...t){let e,n,s,a;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,s,a]=t,e=Be):[e,n,s,a]=t,!e)return P;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const o=[],c=()=>{o.forEach(u=>u()),o.length=0},r=(u,l,g,b)=>(u.addEventListener(l,g,b),()=>u.removeEventListener(l,g,b)),m=se(()=>[Ie(e),$(a)],([u,l])=>{if(c(),!u)return;const g=Te(l)?{...l}:l;o.push(...n.flatMap(b=>s.map(i=>r(u,b,i,g))))},{immediate:!0,flush:"post"}),v=()=>{m(),c()};return O(v),v}function De(){const t=C(!1),e=ae();return e&&J(()=>{t.value=!0},e),t}function ee(t){const e=De();return z(()=>(e.value,!!t()))}function G(t,e={}){const{controls:n=!1,navigator:s=X}=e,a=ee(()=>s&&"permissions"in s),o=H(),c=typeof t=="string"?{name:t}:t,r=H(),m=()=>{var u,l;r.value=(l=(u=o.value)==null?void 0:u.state)!=null?l:"prompt"};Y(o,"change",m);const v=je(async()=>{if(a.value){if(!o.value)try{o.value=await s.permissions.query(c)}catch{o.value=void 0}finally{m()}if(n)return le(o.value)}});return v(),n?{state:r,isSupported:a,query:v}:r}function Ee(t={}){const{navigator:e=X,read:n=!1,source:s,copiedDuring:a=1500,legacy:o=!1}=t,c=ee(()=>e&&"clipboard"in e),r=G("clipboard-read"),m=G("clipboard-write"),v=z(()=>c.value||o),u=C(""),l=C(!1),g=Ve(()=>l.value=!1,a);function b(){c.value&&x(r.value)?e.clipboard.readText().then(w=>{u.value=w}):u.value=M()}v.value&&n&&Y(["copy","cut"],b);async function i(w=$(s)){v.value&&w!=null&&(c.value&&x(m.value)?await e.clipboard.writeText(w):k(w),u.value=w,l.value=!0,g.start())}function k(w){const S=document.createElement("textarea");S.value=w??"",S.style.position="absolute",S.style.opacity="0",document.body.appendChild(S),S.select(),document.execCommand("copy"),S.remove()}function M(){var w,S,F;return(F=(S=(w=document==null?void 0:document.getSelection)==null?void 0:w.call(document))==null?void 0:S.toString())!=null?F:""}function x(w){return w==="granted"||w==="prompt"}return{isSupported:v,text:u,copied:l,copy:i}}const Oe={multiple:!0,accept:"*",reset:!1,directory:!1};function Fe(t={}){const{document:e=Pe}=t,n=C(null),{on:s,trigger:a}=q(),{on:o,trigger:c}=q();let r;e&&(r=e.createElement("input"),r.type="file",r.onchange=u=>{const l=u.target;n.value=l.files,a(n.value)},r.oncancel=()=>{c()});const m=()=>{n.value=null,r&&r.value&&(r.value="",a(null))},v=u=>{if(!r)return;const l={...Oe,...t,...u};r.multiple=l.multiple,r.accept=l.accept,r.webkitdirectory=l.directory,Me(l,"capture")&&(r.capture=l.capture),l.reset&&m(),r.click()};return{files:Z(n),open:v,reset:m,onCancel:o,onChange:s}}const He={class:"flex flex-col overflow-hidden rounded-lg border border-neutral-300 text-lg"},We=["placeholder"],U=I({__name:"TextCardInput",props:{text:{default:()=>({content:""})},focused:{type:Boolean},placeholder:{},copiable:{type:Boolean}},emits:["save"],setup(t,{emit:e}){const n=t,s=e,{t:a}=D(),o=C(n.text),c=ze(()=>{s("save",o.value)},1e3),r=z({get:()=>o.value.content,set:l=>{const g=o.value.content;o.value.content=l,l!==g&&c()}}),m=C();J(()=>{var l;n.focused&&((l=m.value)==null||l.focus())});const{copy:v,copied:u}=Ee();return(l,g)=>(p(),f("div",He,[ie(h("textarea",{ref_key:"textarea",ref:m,placeholder:l.placeholder,class:"resize-none border-0 px-4 py-2 text-lg","onUpdate:modelValue":g[0]||(g[0]=b=>r.value=b)},"        ",8,We),[[ce,r.value]]),l.copiable?(p(),f("button",{key:0,type:"button",onClick:g[1]||(g[1]=()=>d(v)(o.value.content)),class:E(["flex flex-1 items-center justify-center gap-1 px-4 py-2",d(u)?"bg-green-50 text-green-700":"bg-neutral-50 text-neutral-800 hover:bg-neutral-100"])},[d(u)?(p(),f(T,{key:0},[A(_(d(a)("copied"))+" ",1),y(d(K),{class:"size-5"})],64)):(p(),f(T,{key:1},[A(_(d(a)("copy"))+" ",1),y(d(Q),{class:"size-5"})],64))],2)):V("",!0)]))}}),Le={class:"mb-2 text-2xl"},Ne={class:"w-full flex-col"},Re={class:"flex items-center gap-4"},qe={class:"mt-6 flex flex-col-reverse gap-2"},Ge=["onClick"],Ue=["onClick"],Xe=I({__name:"Home",props:{texts:{},medias:{},maxMediaCount:{},focusTextId:{}},setup(t){const e=t,{t:n}=D(),s=C([]),a=i=>{if("id"in i&&i.id){if(i.content==="")return o(i);j.put(route("texts.update",i),{content:i.content},{preserveState:!1})}else j.post(route("texts.store"),{content:i.content},{preserveState:!1})},o=i=>{s.value.push(i.id),j.delete(route("texts.destroy",i),{preserveState:!1})},c=i=>{m.value&&j.post(route("medias.store"),{file:i},{preserveState:!1})},r=C([]),m=z(()=>e.medias.length<e.maxMediaCount),{open:v,onChange:u}=Fe({accept:"*",directory:!1});u(i=>{const k=i==null?void 0:i.item(0);k&&c(k)});const l=i=>{r.value.push(i.id),j.delete(route("medias.destroy",i),{preserveState:!1})},g=i=>Date.parse(i.updatedAt)/1e3,b=i=>{var M;const k=(M=i.clipboardData)==null?void 0:M.files.item(0);if(k)return c(k)};return(i,k)=>(p(),f(T,null,[y(d(ue),{title:d(n)("clipboard")},null,8,["title"]),y(de,null,{default:W(()=>{var M;return[h("div",{class:"mx-auto flex max-w-lg flex-col gap-2 px-2 py-20",onPaste:b},[y(ne,{class:"mb-4"}),h("h1",Le,_(d(n)("clipboard")),1),h("article",Ne,[y(U,{class:"w-full",onSave:a,placeholder:d(n)("copy_anything"),focused:!i.focusTextId||((M=i.texts)==null?void 0:M.length)===0},null,8,["placeholder","focused"])]),h("div",Re,[y(te,{variant:"tertiary",disabled:!m.value,onClick:k[0]||(k[0]=()=>d(v)())},{default:W(()=>[A(_(d(n)("select_file"))+" ",1),y(d(me),{class:"size-5"})]),_:1},8,["disabled"]),h("p",{class:E(m.value||"font-bold text-red-700")},_(d(n)("media_uploaded",{count:i.medias.length,countMax:i.maxMediaCount})),3)]),h("div",qe,[(p(!0),f(T,null,L(i.medias,x=>(p(),f(T,null,[r.value.includes(x.id)?V("",!0):(p(),f("div",{key:0,class:"flex w-full",style:N({order:g(x)})},[y(Ce,{class:"w-full",media:x},null,8,["media"]),h("button",{class:"flex items-start p-2 text-black hover:text-red-700",onClick:()=>l(x)},[y(d(R),{class:"size-6"})],8,Ge)],4))],64))),256)),(p(!0),f(T,null,L(i.texts,x=>(p(),f(T,null,[s.value.includes(x.id)?V("",!0):(p(),f("article",{key:0,class:"flex w-full",style:N({order:g(x)})},[y(U,{text:x,class:"w-full",onSave:a,focused:i.focusTextId===x.id,copiable:""},null,8,["text","focused"]),h("button",{class:"flex items-start p-2 text-black hover:text-red-700",onClick:()=>o(x)},[y(d(R),{class:"size-6"})],8,Ue)],4))],64))),256))])],32)]}),_:1})],64))}});export{Xe as default};
